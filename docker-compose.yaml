version: "3"
services:
  # mongodb1:
  #   build:
  #     context: ./mongodb/node-1
  #     dockerfile: .devcontainer/Dockerfile
  #   container_name: mongodb1
  #   depends_on:
  #     - mongodb2
  #     - mongodb3
  #   ports:
  #     - 27017:27017
  #   volumes:
  #     - mongodb_data:/data/db

  # mongodb2:
  #   build:
  #     context: ./mongodb/node-2
  #     dockerfile: .devcontainer/Dockerfile
  #   container_name: mongodb2
  #   ports:
  #     - 27018:27017
  #   volumes:
  #     - mongodb_data2:/data/db

  # mongodb3:
  #   build:
  #     context: ./mongodb/node-2
  #     dockerfile: .devcontainer/Dockerfile
  #   container_name: mongodb3
  #   ports:
  #     - 27019:27017
  #   volumes:
  #     - mongodb_data3:/data/db

  # vision:
  #   build:
  #     context: .
  #     dockerfile: vision-be/vision-panettone/.devcontainer/Dockerfile
  #     args:
  #       - SOURCE_DIRECTORY=vision-be/vision-panettone
  #   working_dir: /workspaces/vision-be/vision-panettone
  #   container_name: vision
  #   command: ["bin/vision_main"]
  #   volumes:
  #     - /tmp:/tmp
  #   ports:
  #     - 8080:8080
  #   depends_on:
  #     # - mongodb1
  #     - gateway
  #   networks:
  #     - host

  gateway:
    build:
      context: .
      dockerfile: gateway/gateway-augusto/.devcontainer/Dockerfile
      args:
        - SOURCE_DIRECTORY=gateway/gateway-augusto
    working_dir: /workspaces/gateway/gateway-augusto
    container_name: gateway
    command: ["bin/gateway_main"]
    volumes:
      - /tmp:/tmp
      - ./:/app
    # ports:
    #   - 50051:50051
    network_mode: host
    # networks:
    #   - host

#   simulator-private:
#     image: roboticserlangen/simulatorcli:commit-6a4e1c06533b
# #    image: robocupssl/grsim:2.4.0
#     restart: unless-stopped
#     environment:
#       # ER-Force options
#       GEOMETRY: "2020"
#       REALISM: "RC2021"
#     ports:
#       - 10300/udp
#       - 10301/udp
#       - 10302/udp
  
#   simulator:
#     image: g3force/proxy-tcp-udp-mc:0.2.1
#     command:
#       - "udp,:10301,simulator-private:10301,Blue"
#       - "udp,:10302,simulator-private:10302,Yellow"
#       - "mc,224.5.23.2:10020,224.5.23.2:10006,Vision"
#       - "mc,224.5.23.1:10003,224.5.23.1:11003,Referee"
#       - "mc,224.5.23.2:10010,224.5.23.2:11010,Tracker"
#     restart: unless-stopped
#     ports:
#       - 10300/udp
#       - 10301/udp
#       - 10302/udp

#   ssl-simulation-controller:
#     image: robocupssl/ssl-simulation-controller:0.12.1
#     command:
#       - "-refereeAddress"
#       - "224.5.23.1:11003"
#       - "-visionAddress"
#       - "224.5.23.2:10020"
#       - "-trackerAddress"
#       - "224.5.23.2:11010"
#       - "-simControlPort"
#       - "10300"
#       - "-robotSpecConfig"
#       - "/config/robot-specs.yaml"
#     restart: unless-stopped
#     volumes:
#       - ./config/ssl-simulation-controller:/config:ro

# volumes:
#   mongodb_data:
#   mongodb_data2:
#   mongodb_data3:

# networks:
#   host:
#     name: host
#     external: true